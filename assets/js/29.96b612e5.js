(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{178:function(s,t,a){"use strict";a.r(t);var n=a(0),o=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"_9-索引优化-一"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-索引优化-一","aria-hidden":"true"}},[s._v("#")]),s._v(" 9.索引优化(一)")]),s._v(" "),a("h2",{attrs:{id:"数据准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据准备","aria-hidden":"true"}},[s._v("#")]),s._v(" 数据准备")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" staffs"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("AUTO_INCREMENT")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("VARCHAR")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("24")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("''")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'姓名'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("age"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'年龄'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("pos"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("VARCHAR")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("20")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("''")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'职位'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("add_time"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("TIMESTAMP")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("current_timestamp")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'入职时间'")]),s._v("\n"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("CHARSET")]),s._v(" utf8 "),a("span",{attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'员工记录表'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" staffs"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("age"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("pos"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("add_time"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token string"}},[s._v("'zs'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("22")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'manager'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("now")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" staffs"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("age"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("pos"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("add_time"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token string"}},[s._v("'july'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("23")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'dev'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("now")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" staffs"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("age"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("pos"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("add_time"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token string"}},[s._v("'2000'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("23")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'dev'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("now")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" staffs"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" staffs "),a("span",{attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INDEX")]),s._v("  idx_staffs_nameAgePos"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("age"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("pos"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])])]),a("h2",{attrs:{id:"索引失效"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#索引失效","aria-hidden":"true"}},[s._v("#")]),s._v(" 索引失效")]),s._v(" "),a("ul",[a("li",[s._v("1.全值匹配我最爱")]),s._v(" "),a("li",[s._v("2.最佳左前缀法则：如果索引了多列，要遵守最左前缀法则，指的是查询从索引的最左前列开始并且"),a("strong",[s._v("不跳过索引中的列")]),s._v("。")]),s._v(" "),a("li",[s._v("3.不在索引列上做任何操作（计算、函数、(自动或手动)类型转换），会导致索引失效而转向全表扫描。")]),s._v(" "),a("li",[s._v("4.存储引擎不能使用索引中范围条件右边的列")]),s._v(" "),a("li",[s._v("5.尽量使用覆盖索引（只访问索引的查询（索引列和查询列一致）），减少select *")]),s._v(" "),a("li",[s._v("6.mysql在使用不等于（!=或者 <  >）的时候无法使用索引会导致全表扫描。")]),s._v(" "),a("li",[s._v("7.is null, is not null 也无法使用索引")]),s._v(" "),a("li",[s._v("8.like以通配符开头（'%abc...'）mysql索引失效，变成全表扫描")]),s._v(" "),a("li",[s._v("9.字符串不加单引号索引失效")]),s._v(" "),a("li",[s._v("10.少用or,用它来连接时索引会失效。")])]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" staffs "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),s._v(" name"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token string"}},[s._v("'july'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------+------+----------+-------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys         "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("                   "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref   "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------+------+----------+-------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" staffs "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_staffs_nameAgePos "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_staffs_nameAgePos "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("74")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" const "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------+------+----------+-------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])])]),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" staffs "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),s._v(" name"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token string"}},[s._v("'july'")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("AND")]),s._v(" age"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token number"}},[s._v("25")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------------+------+----------+-------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys         "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("                   "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref         "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------------+------+----------+-------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" staffs "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_staffs_nameAgePos "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_staffs_nameAgePos "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("78")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" const"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("const "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------------+------+----------+-------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n")])])]),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" staffs "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),s._v(" name"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token string"}},[s._v("'july'")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("AND")]),s._v(" age"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token number"}},[s._v("25")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("AND")]),s._v(" pos"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token string"}},[s._v("'dev'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------------------+------+----------+-------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys         "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("                   "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref               "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------------------+------+----------+-------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" staffs "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_staffs_nameAgePos "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_staffs_nameAgePos "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("140")]),s._v("     "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" const"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("const"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("const "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------------------+------+----------+-------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])])]),a("p",[s._v("以上效果比较好的")]),s._v(" "),a("h3",{attrs:{id:"只用索引的最后两列"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#只用索引的最后两列","aria-hidden":"true"}},[s._v("#")]),s._v(" 只用索引的最后两列")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" staffs "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),s._v(" age"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token number"}},[s._v("25")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("AND")]),s._v(" pos"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token string"}},[s._v("'dev'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" staffs "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("          "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("    "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("33.33")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n没有使用索引\n")])])]),a("h3",{attrs:{id:"只用索引的最后一列"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#只用索引的最后一列","aria-hidden":"true"}},[s._v("#")]),s._v(" 只用索引的最后一列")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" staffs "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),s._v(" pos"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token string"}},[s._v("'dev'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" staffs "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("          "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("    "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("33.33")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n没有使用索引\n")])])]),a("h3",{attrs:{id:"只使用索引的开头和结尾列"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#只使用索引的开头和结尾列","aria-hidden":"true"}},[s._v("#")]),s._v(" 只使用索引的开头和结尾列")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" staffs "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),s._v(" name"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token string"}},[s._v("'july'")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("AND")]),s._v(" pos"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token string"}},[s._v("'dev'")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------+------+----------+-----------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys         "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("                   "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref   "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra                 "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------+------+----------+-----------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" staffs "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_staffs_nameAgePos "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_staffs_nameAgePos "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("74")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" const "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("33.33")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),s._v(" condition "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------+------+----------+-----------------------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.01")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n用到了索引，但是只用到了name列的索引， pos列的索引没有用到\n")])])]),a("h2",{attrs:{id:"最佳左前缀法则口诀：带头大哥不能死，中间兄弟不能断"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最佳左前缀法则口诀：带头大哥不能死，中间兄弟不能断","aria-hidden":"true"}},[s._v("#")]),s._v(" 最佳左前缀法则口诀：带头大哥不能死，中间兄弟不能断")])])}],!1,null,null,null);o.options.__file="9.索引优化01.md";t.default=o.exports}}]);