(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{182:function(s,t,a){"use strict";a.r(t);var n=a(0),o=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"_7-单表优化案例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-单表优化案例","aria-hidden":"true"}},[s._v("#")]),s._v(" 7.单表优化案例")]),s._v(" "),a("h2",{attrs:{id:"数据准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据准备","aria-hidden":"true"}},[s._v("#")]),s._v(" 数据准备")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXISTS")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("article"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INT")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("10")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("UNSIGNED")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("AUTO_INCREMENT")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("author_id"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INT")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("10")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("UNSIGNED")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("     "),a("span",{attrs:{class:"token comment"}},[s._v("-- 作者id")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("category_id"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INT")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("10")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("UNSIGNED")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),a("span",{attrs:{class:"token comment"}},[s._v("-- 分类id")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("views"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INT")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("10")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("UNSIGNED")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("         "),a("span",{attrs:{class:"token comment"}},[s._v("-- 被查看的次数")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("comments"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INT")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("10")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("UNSIGNED")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("      "),a("span",{attrs:{class:"token comment"}},[s._v("-- 评论备注")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("title"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("VARCHAR")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("255")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("             "),a("span",{attrs:{class:"token comment"}},[s._v("-- 标题")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("content"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("TEXT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("                     "),a("span",{attrs:{class:"token comment"}},[s._v("-- 内容")]),s._v("\n"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("article"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("author_id"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("category_id"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("views"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("comments"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("title"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("content"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("2")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("2")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("2")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("2")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("2")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("2")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("3")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("3")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("3")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("3")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" article"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])])]),a("h3",{attrs:{id:"需求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需求","aria-hidden":"true"}},[s._v("#")]),s._v(" 需求")]),s._v(" "),a("p",[s._v("查询category_id为1,且commonts大于1的情况下，views最多的article_id")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" id"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" author_id "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" article "),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" category_id "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("and")]),s._v(" comments "),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" views "),a("span",{attrs:{class:"token keyword"}},[s._v("DESC")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])])]),a("h3",{attrs:{id:"分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分析","aria-hidden":"true"}},[s._v("#")]),s._v(" 分析")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" id"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" author_id "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" article "),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" category_id "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("and")]),s._v(" comments "),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" views "),a("span",{attrs:{class:"token keyword"}},[s._v("DESC")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-----------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v("   "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra                       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-----------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" article "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("ALL")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("          "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("    "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("33.33")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" filesort "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-----------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.01")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n")])])]),a("ul",[a("li",[s._v("由于type为ALL,所以进行了全表扫描。")]),s._v(" "),a("li",[s._v("extra字段包含了Using filesort，所以进行了文件内排序。")]),s._v(" "),a("li",[s._v("以上两点证明了，sql性能并不好")])]),s._v(" "),a("h2",{attrs:{id:"开始优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始优化","aria-hidden":"true"}},[s._v("#")]),s._v(" 开始优化")]),s._v(" "),a("h4",{attrs:{id:"_1-建索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-建索引","aria-hidden":"true"}},[s._v("#")]),s._v(" 1.建索引")]),s._v(" "),a("p",[s._v("把where后面的字段全部建上索引")]),s._v(" "),a("p",[s._v("两种建索引的方式")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("article"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INDEX")]),s._v(" idx_article_ccv"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("category_id"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("comments"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("views"),a("span",{attrs:{class:"token punctuation"}},[s._v("`")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_article_ccv "),a("span",{attrs:{class:"token keyword"}},[s._v("on")]),s._v(" article"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("category_id"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" comments"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" views"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h4",{attrs:{id:"查看索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看索引","aria-hidden":"true"}},[s._v("#")]),s._v(" 查看索引")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("show")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" article"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("---------+------------+-----------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Table")]),s._v("   "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Non_unique "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Key_name        "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Seq_in_index "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Column_name "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Collation "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Cardinality "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Sub_part "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Packed "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("Null")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Index_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Comment")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Index_comment "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("---------+------------+-----------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" article "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),a("span",{attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v("         "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id          "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("           "),a("span",{attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("   "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("         "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("               "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" article "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_article_ccv "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" category_id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("           "),a("span",{attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("   "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("         "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("               "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" article "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_article_ccv "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),a("span",{attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" comments    "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("           "),a("span",{attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("   "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("         "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("               "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" article "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("          "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_article_ccv "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("            "),a("span",{attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" views       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" A         "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("           "),a("span",{attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("     "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("   "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BTREE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("         "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("               "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("---------+------------+-----------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("h3",{attrs:{id:"再次分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#再次分析","aria-hidden":"true"}},[s._v("#")]),s._v(" 再次分析")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" id"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" author_id "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" article "),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" category_id "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("and")]),s._v(" comments "),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" views "),a("span",{attrs:{class:"token keyword"}},[s._v("DESC")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+---------+------------+-------+-----------------+-----------------+---------+------+------+----------+---------------------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v("   "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys   "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("             "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra                                 "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+---------+------------+-------+-----------------+-----------------+---------+------+------+----------+---------------------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" article "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" range "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_article_ccv "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_article_ccv "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("8")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),s._v(" condition"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" filesort "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+---------+------------+-------+-----------------+-----------------+---------+------+------+----------+---------------------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])])]),a("ul",[a("li",[s._v("查询用到了索引")]),s._v(" "),a("li",[s._v("但是文件内排序依然存在。")])]),s._v(" "),a("h2",{attrs:{id:"结论"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#结论","aria-hidden":"true"}},[s._v("#")]),s._v(" 结论")]),s._v(" "),a("ul",[a("li",[s._v("type变成range,这是可以忍受的，但是extra里使用Using filesort仍是无法接受的")]),s._v(" "),a("li",[s._v("但是我们已经建立了索引，为啥没用呢 ？")]),s._v(" "),a("li",[s._v("这是因为按照BTree索引的工作原理，先排序category_id,如果遇到相同category_id，再排序comments,如果遇到相同的comments则再排序views.")]),s._v(" "),a("li",[s._v("当comments字段在联合索引里处于中间位置时，因comments > 1条件是一个范围值（所谓range）,MySQL无法利用索引再对后面的views进行检索，即range类型查询的字段后面的索引无效。")])]),s._v(" "),a("p",[s._v("##进一步优化")]),s._v(" "),a("p",[s._v("1.删除索引")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INDEX")]),s._v(" idx_article_ccv "),a("span",{attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" article"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])])]),a("p",[s._v("2.再建索引")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),s._v(" idx_article_cv "),a("span",{attrs:{class:"token keyword"}},[s._v("on")]),s._v(" article"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("category_id "),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" views"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("3.再分析")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" id"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" author_id "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" article "),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" category_id "),a("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("and")]),s._v(" comments "),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" views "),a("span",{attrs:{class:"token keyword"}},[s._v("DESC")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+---------+------------+------+----------------+----------------+---------+-------+------+----------+-------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v("   "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("            "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref   "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+---------+------------+------+----------------+----------------+---------+-------+------+----------+-------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" article "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_article_cv "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_article_cv "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("4")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" const "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("33.33")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+---------+------------+------+----------------+----------------+---------+-------+------+----------+-------------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("此时文件内排序已经没有了。")])])}],!1,null,null,null);o.options.__file="7.单表优化案例.md";t.default=o.exports}}]);