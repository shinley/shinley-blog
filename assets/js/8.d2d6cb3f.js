(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{196:function(s,a,t){"use strict";t.r(a);var e=t(0),n=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"_1-mysql-5-7-22安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-mysql-5-7-22安装","aria-hidden":"true"}},[s._v("#")]),s._v(" 1. MySQL 5.7.22安装")]),s._v(" "),t("h2",{attrs:{id:"下载tar包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载tar包","aria-hidden":"true"}},[s._v("#")]),s._v(" 下载tar包")]),s._v(" "),t("h1",{attrs:{id:"安装依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖","aria-hidden":"true"}},[s._v("#")]),s._v(" 安装依赖")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("apt "),t("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" libaio \n")])])]),t("h2",{attrs:{id:"创建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建用户","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建用户")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" mysql\n"),t("span",{attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -r -g mysql -s /bin/false mysql\n")])])]),t("h2",{attrs:{id:"创建目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建目录","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建目录")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("shell"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /usr/local/mysql/"),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("data,log,etc,run"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nshell"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R mysql:mysql /usr/local/mysql\nshell"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("chmod")]),s._v(" 750 /usr/local/mysql/"),t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("data,log,etc,run"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"创建-my-cnf"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建-my-cnf","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建 my.cnf")]),s._v(" "),t("div",{staticClass:"language-text extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[client]\nport = 3306\nsocket = /usr/local/mysql/run/mysql.sock\n\n[mysqld]\nport = 3306\nsocket = /usr/local/mysql/run/mysql.sock\npid_file = /usr/local/mysql/run/mysql.pid\nbasedir = /usr/local/mysql/\ndatadir = /usr/local/mysql/data\ndefault_storage_engine = InnoDB\nmax_allowed_packet = 128M\nmax_connections = 2048\nopen_files_limit = 65535\n\n#skip-name-resolve\nlower_case_table_names=1\n\ncharacter-set-server = utf8mb4\ncollation-server = utf8mb4_unicode_ci\ninit_connect='SET NAMES utf8mb4'\n\n\ninnodb_buffer_pool_size = 128M\ninnodb_log_file_size = 128M\ninnodb_file_per_table = 1\ninnodb_flush_log_at_trx_commit = 0\n\n\nkey_buffer_size = 16M\n\nlog-error = /usr/local/mysql/log/mysql_error.log\nlog-bin = /usr/local/mysql/log/mysql_bin.log\nslow_query_log = 1\nslow_query_log_file =/usr/local/mysql/log/mysql_slow_query.log\nlong_query_time = 5\n\n\ntmp_table_size = 16M\nmax_heap_table_size = 16M\nquery_cache_type = 0\nquery_cache_size = 0\n\nserver-id=1\n\n")])])]),t("h2",{attrs:{id:"拷贝my-cnf到-etc-下（拷贝后这个文件为root-root）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拷贝my-cnf到-etc-下（拷贝后这个文件为root-root）","aria-hidden":"true"}},[s._v("#")]),s._v(" 拷贝my.cnf到/etc/下（拷贝后这个文件为root:root）")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("shell"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("cp")]),s._v(" /usr/local/mysql/etc/my.cnf /etc/\n")])])]),t("h2",{attrs:{id:"初始化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初始化","aria-hidden":"true"}},[s._v("#")]),s._v(" 初始化")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("mysqld --initialize --user"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql   --basedir"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql --datadir"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/data\n")])])]),t("h2",{attrs:{id:"获取生成的临时密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取生成的临时密码","aria-hidden":"true"}},[s._v("#")]),s._v(" 获取生成的临时密码")]),s._v(" "),t("p",[s._v("生成一个临时密码，可以在mysql_error.log文件找到")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("shell"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v("'temporary password'")]),s._v(" /usr/local/mysql/log/mysql_error.log \n\n")])])]),t("h1",{attrs:{id:"配置服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置服务","aria-hidden":"true"}},[s._v("#")]),s._v(" 配置服务")]),s._v(" "),t("p",[s._v("配置服务，使用systemctl管理")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("shell"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("cd")]),s._v(" /lib/systemd/system\nshell"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("touch")]),s._v(" mysqld.service \n\n")])])]),t("p",[s._v("mysqld.service")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# Copyright (c) 2015, 2016, Oracle and/or its affiliates. All rights reserved.\n#\n# This program is free software; you can redistribute it and/or modify\n# it under the terms of the GNU General Public License as published by\n# the Free Software Foundation; version 2 of the License.\n#\n# This program is distributed in the hope that it will be useful,\n# but WITHOUT ANY WARRANTY; without even the implied warranty of\n# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n# GNU General Public License for more details.\n#\n# You should have received a copy of the GNU General Public License\n# along with this program; if not, write to the Free Software\n# Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA\n#\n# systemd service file for MySQL forking server\n#\n\n[Unit]\nDescription=MySQL Server\nDocumentation=man:mysqld(8)\nDocumentation=http://dev.mysql.com/doc/refman/en/using-systemd.html\nAfter=network.target\nAfter=syslog.target\n\n[Install]\nWantedBy=multi-user.target\n\n[Service]\nUser=mysql\nGroup=mysql\n\nType=forking\n\nPIDFile=/usr/local/mysql/run/mysql.pid\n\n# Disable service start and stop timeout logic of systemd for mysqld service.\nTimeoutSec=0\n\n# Execute pre and post scripts as root\nPermissionsStartOnly=true\n\n# Needed to create system tables\n#ExecStartPre=/usr/bin/mysqld_pre_systemd\n\n# Start main service\nExecStart=/usr/local/mysql/bin/mysqld --daemonize --pid-file=/usr/local/mysql/run/mysql.pid $MYSQLD_OPTS\n\n# Use this to switch malloc implementation\nEnvironmentFile=-/etc/sysconfig/mysql\n\n# Sets open_files_limit\nLimitNOFILE = 65535\n\nRestart=on-failure\n\nRestartPreventExitStatus=1\n\nPrivateTmp=false\n\n")])])]),t("h1",{attrs:{id:"加载配置服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#加载配置服务","aria-hidden":"true"}},[s._v("#")]),s._v(" 加载配置服务")]),s._v(" "),t("p",[s._v("让systemctl加载配置服务")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("shell"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" systemctl daemon-reload\nshell"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" systemctl "),t("span",{attrs:{class:"token function"}},[s._v("enable")]),s._v(" mysqld.service （设置开机启动）\nshell"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" systemctl is-enabled mysqld\n")])])]),t("p",[s._v("启动MySQL服务")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("shell"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" systemctl start mysqld.service\n")])])]),t("h1",{attrs:{id:"mysql用户初始化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql用户初始化","aria-hidden":"true"}},[s._v("#")]),s._v(" MySQL用户初始化")]),s._v(" "),t("ul",[t("li",[s._v("重置密码 (用到上面日志文件中生成的初始密码:ibF<RpDX!9wR)")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("mysql -uroot -p系统生成的密码\nSET PASSWORD "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" PASSWORD"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v("'123456'")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("ul",[t("li",[s._v("删除匿名用户")]),s._v(" "),t("li",[s._v("关闭root用户的远程登录")])]),s._v(" "),t("h3",{attrs:{id:"删除测试数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除测试数据库","aria-hidden":"true"}},[s._v("#")]),s._v(" 删除测试数据库")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("shell"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/local/mysql/bin/mysql_secure_installation\n")])])])])}],!1,null,null,null);n.options.__file="1.Install-MySQL5.7.22.md";a.default=n.exports}}]);