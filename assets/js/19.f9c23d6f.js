(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{193:function(s,a,t){"use strict";t.r(a);var n=t(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"_2-mysql-用户管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-mysql-用户管理","aria-hidden":"true"}},[s._v("#")]),s._v(" 2. MySQL 用户管理")]),s._v(" "),t("h2",{attrs:{id:"使用mysql命令登录数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用mysql命令登录数据库","aria-hidden":"true"}},[s._v("#")]),s._v(" 使用mysql命令登录数据库")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysql "),t("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("h localhost "),t("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("uroot "),t("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("p\n")])])]),t("ul",[t("li",[s._v("-h 主机名")]),s._v(" "),t("li",[s._v("-u 用户名")]),s._v(" "),t("li",[s._v("-p 密码   ，密码和-p之间不能有空格")]),s._v(" "),t("li",[s._v("-P(大写) 端口号，不指定时默认为3306")]),s._v(" "),t("li",[s._v("-e 执行的SQL语句")])]),s._v(" "),t("h2",{attrs:{id:"新建普通用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新建普通用户","aria-hidden":"true"}},[s._v("#")]),s._v(" 新建普通用户")]),s._v(" "),t("pre",[t("code",[s._v("两种方式，一是使用create user或grant语句，另一种是直接操作mysql授权表\n")])]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" user_speification "),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("user_specification"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    user_specification:\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("user")]),t("span",{attrs:{class:"token variable"}},[s._v("@host")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        IDENTIFIED "),t("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("PASSWORD"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v("'password'")]),s._v("\n        ｜IDENTIFIED "),t("span",{attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" auth_plugin "),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v("'auth_string'")]),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("p",[s._v("例：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" ‘jeffrey’@'localhost"),t("span",{attrs:{class:"token string"}},[s._v("' IDENTIFIED BY '")]),s._v("mypass'\n")])])]),t("p",[s._v("为了避免指定明文密码，如果知道密码的散列值 ，可以通过PASSWORD关键字使用密码的哈希设置密码\n密码的哈希值可以使用password() 函数获取：\n如：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("select")]),s._v(" password"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v("'mypass'")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("使用GRANT语句创建新用户，同时也可以赋权限")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("    "),t("span",{attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("privileges")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" db"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("user")]),t("span",{attrs:{class:"token variable"}},[s._v("@host")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("IDENTIFIED "),t("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" ‘password’"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{attrs:{class:"token keyword"}},[s._v("user")]),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INDENTIFIED "),t("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v("'password'")]),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{attrs:{class:"token keyword"}},[s._v("WITH")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("OPTION")]),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("p",[s._v("例：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("MySQL"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),t("span",{attrs:{class:"token keyword"}},[s._v("GRANT")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("*")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("TO")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v("'testUser@localhost'")]),s._v("\n     "),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("IDENTIFIED "),t("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v("'testpwd'")]),s._v("\n")])])]),t("p",[s._v("执行成功后，验证testUser的权限")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("MySQL"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),t("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" Host，"),t("span",{attrs:{class:"token keyword"}},[s._v("User")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("Select_priv"),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("Update_priv "),t("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" mysql"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("user")]),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token string"}},[s._v("'testUser'")]),s._v("\n")])])]),t("p",[s._v("User表中的user和host字段区分大小写，在查询的时候要指定正确的用户名 或主机名")]),s._v(" "),t("h2",{attrs:{id:"删除普通用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除普通用户","aria-hidden":"true"}},[s._v("#")]),s._v(" 删除普通用户")]),s._v(" "),t("p",[s._v("使用DROP USER删除用户")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("user")]),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{attrs:{class:"token keyword"}},[s._v("user")]),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("p",[s._v("例：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("USER")]),s._v(" ‘"),t("span",{attrs:{class:"token keyword"}},[s._v("user")]),t("span",{attrs:{class:"token variable"}},[s._v("@localhost")]),s._v("’\n")])])]),t("h2",{attrs:{id:"root用户修改自已的密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#root用户修改自已的密码","aria-hidden":"true"}},[s._v("#")]),s._v(" root用户修改自已的密码")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysqladmin "),t("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("u username "),t("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("h localhost "),t("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("p password "),t("span",{attrs:{class:"token string"}},[s._v('"newpwd"')]),s._v("\n")])])]),t("p",[s._v("使用SET语句修改root用户的密码（普通用户也可以修改自已的密码）")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" PASSWORD"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("PASSWORD"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token string"}},[s._v('"rootpwd"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h2",{attrs:{id:"root用户修改普通用户密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#root用户修改普通用户密码","aria-hidden":"true"}},[s._v("#")]),s._v(" root用户修改普通用户密码")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" PASSWORD "),t("span",{attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v("'user'")]),s._v("@'host"),t("span",{attrs:{class:"token string"}},[s._v("'=PASSWORD('")]),s._v("somepassword'"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h2",{attrs:{id:"root用户密码丢失解决办法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#root用户密码丢失解决办法","aria-hidden":"true"}},[s._v("#")]),s._v(" root用户密码丢失解决办法")]),s._v(" "),t("p",[s._v("使用 --skip-grant-tables选项启动MySQL服务")]),s._v(" "),t("p",[s._v("windows操作系统中，使用mysqld或mysqld-nt来启动MySQL服务进程")]),s._v(" "),t("p",[s._v("mysqld命令如下：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysqld "),t("span",{attrs:{class:"token comment"}},[s._v("--skip-grant-tables")]),s._v("\n")])])]),t("p",[s._v("myslqd-nt命令如下：")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysqld"),t("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("nt  "),t("span",{attrs:{class:"token comment"}},[s._v("--skip-grant-tables")]),s._v("\n")])])]),t("p",[s._v("Linux操作系统中，使用mysqld_safe来启动MySQL服务，\n也可以使用/etc/init.d/mysql命令来启动MySQL服务。")]),s._v(" "),t("p",[s._v("mysqld_safe 命令如下")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysqld_safe "),t("span",{attrs:{class:"token comment"}},[s._v("--skip-grant-tables user=mysql")]),s._v("\n")])])]),t("p",[s._v("/etc/init.d/mysql命令如下")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),t("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("init"),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d"),t("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql "),t("span",{attrs:{class:"token keyword"}},[s._v("start")]),t("span",{attrs:{class:"token operator"}},[s._v("-")]),s._v("mysqld "),t("span",{attrs:{class:"token comment"}},[s._v("--skip-grant-tables")]),s._v("\n")])])]),t("p",[s._v("启动MySQL服务后，就可以使用root用户登录了。")]),s._v(" "),t("p",[s._v("修改密码后，要刷新权限 ，新密码才会生效")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysql"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("FLUSH "),t("span",{attrs:{class:"token keyword"}},[s._v("PRIVILEGES")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h2",{attrs:{id:"配置远程连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置远程连接","aria-hidden":"true"}},[s._v("#")]),s._v(" 配置远程连接")]),s._v(" "),t("p",[s._v("默认情况下，mysql只允许本地登录，如果要开启远程连接，则需要修改/etc/mysql/my.conf文件。")]),s._v(" "),t("h3",{attrs:{id:"一、修改-etc-mysql-my-conf"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、修改-etc-mysql-my-conf","aria-hidden":"true"}},[s._v("#")]),s._v(" 一、修改/etc/mysql/my.conf")]),s._v(" "),t("p",[s._v("找到bind-address = 127.0.0.1这一行\n改为bind-address = 0.0.0.0即可")]),s._v(" "),t("h3",{attrs:{id:"二、为需要远程登录的用户赋予权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、为需要远程登录的用户赋予权限","aria-hidden":"true"}},[s._v("#")]),s._v(" 二、为需要远程登录的用户赋予权限")]),s._v(" "),t("ol",[t("li",[s._v("新建用户远程连接mysql数据库")])]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("*")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("to")]),s._v(" admin@'"),t("span",{attrs:{class:"token operator"}},[s._v("%")]),t("span",{attrs:{class:"token string"}},[s._v("' identified by '")]),t("span",{attrs:{class:"token number"}},[s._v("123456")]),s._v("' "),t("span",{attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("option")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \nflush "),t("span",{attrs:{class:"token keyword"}},[s._v("privileges")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("允许任何ip地址(%表示允许任何ip地址)的电脑用admin帐户和密码(123456)来访问这个mysql server。\n注意admin账户不一定要存在。")]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("支持root用户允许远程连接mysql数据库")])]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("privileges")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("*")]),t("span",{attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("to")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v("'root'")]),s._v("@'"),t("span",{attrs:{class:"token operator"}},[s._v("%")]),t("span",{attrs:{class:"token string"}},[s._v("' identified by '")]),t("span",{attrs:{class:"token number"}},[s._v("123456")]),s._v("' "),t("span",{attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("option")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nflush "),t("span",{attrs:{class:"token keyword"}},[s._v("privileges")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("三、查看系统用户")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("use")]),s._v(" mysql"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("user")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" host "),t("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("user")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])])])])}],!1,null,null,null);e.options.__file="2.MySQL-User-Manager.md";a.default=e.exports}}]);