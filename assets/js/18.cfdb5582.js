(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{194:function(s,t,a){"use strict";a.r(t);var n=a(0),r=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"_19-order-by关键字优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_19-order-by关键字优化","aria-hidden":"true"}},[s._v("#")]),s._v(" 19.order by关键字优化")]),s._v(" "),a("p",[s._v("order by 子句，尽量使用index方式排序，避免使用filesort方式排序")]),s._v(" "),a("h2",{attrs:{id:"准备数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备数据","aria-hidden":"true"}},[s._v("#")]),s._v(" 准备数据")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" tblA"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),a("span",{attrs:{class:"token comment"}},[s._v("#`id` INT PRIMARY KEY NOT NULL AUTO_INCREMENT,")]),s._v("\n  age "),a("span",{attrs:{class:"token keyword"}},[s._v("INT")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  birth "),a("span",{attrs:{class:"token keyword"}},[s._v("TIMESTAMP")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" \n"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" tblA"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("age"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" birth"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("22")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("NOW")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" tblA"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("age"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" birth"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("23")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("NOW")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" tblA"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("age"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" birth"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("23")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token function"}},[s._v("NOW")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("INDEX")]),s._v(" idx_A_ageBirth "),a("span",{attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" tblA"),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("age"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" birth"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tblA"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])])]),a("h2",{attrs:{id:"以下只关注有没有使用-filesort"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#以下只关注有没有使用-filesort","aria-hidden":"true"}},[s._v("#")]),s._v(" 以下只关注有没有使用 filesort")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("by")]),s._v("字段，带头大哥在\n\nmysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tblA "),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" age "),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("20")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" age"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+----------------+----------------+---------+------+------+----------+--------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("            "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra                    "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+----------------+----------------+---------+------+------+----------+--------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" tblA  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_A_ageBirth "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_A_ageBirth "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("9")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+----------------+----------------+---------+------+------+----------+--------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n")])])]),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("by")]),s._v("字段，带头大哥在\n\nmysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tblA "),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" age "),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("20")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" age"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" birth"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+----------------+----------------+---------+------+------+----------+--------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("            "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra                    "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+----------------+----------------+---------+------+------+----------+--------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" tblA  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_A_ageBirth "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_A_ageBirth "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("9")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+----------------+----------------+---------+------+------+----------+--------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("order by字段，带头大哥不在")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tblA "),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" age "),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("20")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" birth"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+----------------+----------------+---------+------+------+----------+------------------------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("            "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra                                    "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+----------------+----------------+---------+------+------+----------+------------------------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" tblA  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_A_ageBirth "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_A_ageBirth "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("9")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" filesort "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+----------------+----------------+---------+------+------+----------+------------------------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("order by字段顺序与索引字段不一致")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tblA "),a("span",{attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" age "),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("20")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" birth"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" age"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+----------------+----------------+---------+------+------+----------+------------------------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("            "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra                                    "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+----------------+----------------+---------+------+------+----------+------------------------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" tblA  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_A_ageBirth "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_A_ageBirth "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("9")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" filesort "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+----------------+----------------+---------+------+------+----------+------------------------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])])]),a("p",[s._v("带头大哥不在")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tblA "),a("span",{attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" birth"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+---------------+----------------+---------+------+------+----------+-----------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("            "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra                       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+---------------+----------------+---------+------+------+----------+-----------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" tblA  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("          "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_A_ageBirth "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("9")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" filesort "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+---------------+----------------+---------+------+------+----------+-----------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("带头大哥不在")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tblA "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),s._v(" birth "),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'2016-01-28 00:00:00'")]),s._v("  "),a("span",{attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" birth"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+---------------+----------------+---------+------+------+----------+------------------------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("            "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra                                    "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+---------------+----------------+---------+------+------+----------+------------------------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" tblA  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("          "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_A_ageBirth "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("9")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("33.33")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" filesort "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+---------------+----------------+---------+------+------+----------+------------------------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])])]),a("p",[s._v("带头大哥 在")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tblA "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),s._v(" birth "),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'2016-01-28 00:00:00'")]),s._v("  "),a("span",{attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" age"),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+---------------+----------------+---------+------+------+----------+--------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("            "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra                    "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+---------------+----------------+---------+------+------+----------+--------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" tblA  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("          "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_A_ageBirth "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("9")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("33.33")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("where")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+---------------+----------------+---------+------+------+----------+--------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n")])])]),a("p",[s._v("两个字段排序方向不一致")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("EXPLAIN")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tblA  "),a("span",{attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" age "),a("span",{attrs:{class:"token keyword"}},[s._v("ASC")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" birth "),a("span",{attrs:{class:"token keyword"}},[s._v("DESC")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+---------------+----------------+---------+------+------+----------+-----------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" id "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" select_type "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" partitions "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("type")]),s._v("  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" possible_keys "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("key")]),s._v("            "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" key_len "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" ref  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" filtered "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" Extra                       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+---------------+----------------+---------+------+------+----------+-----------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("SIMPLE")]),s._v("      "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" tblA  "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v("          "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" idx_A_ageBirth "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("9")]),s._v("       "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("   "),a("span",{attrs:{class:"token number"}},[s._v("100.00")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("index")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("Using")]),s._v(" filesort "),a("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{attrs:{class:"token operator"}},[s._v("+")]),a("span",{attrs:{class:"token comment"}},[s._v("----+-------------+-------+------------+-------+---------------+----------------+---------+------+------+----------+-----------------------------+")]),s._v("\n"),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("row")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{attrs:{class:"token keyword"}},[s._v("set")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v(" warning "),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])])]),a("h2",{attrs:{id:"mysql支持二种方式的排序，filesort和index-index效率高。它指mysql扫描索引本身完成排序。filesort方式效率较低"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql支持二种方式的排序，filesort和index-index效率高。它指mysql扫描索引本身完成排序。filesort方式效率较低","aria-hidden":"true"}},[s._v("#")]),s._v(" MySQL支持二种方式的排序，FileSort和Index, Index效率高。它指MySQL扫描索引本身完成排序。FileSort方式效率较低")]),s._v(" "),a("h2",{attrs:{id:"order-by满足两情况，会使用index方式排序："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#order-by满足两情况，会使用index方式排序：","aria-hidden":"true"}},[s._v("#")]),s._v(" ORDER BY满足两情况，会使用INDEX方式排序：")]),s._v(" "),a("ul",[a("li",[a("ol",[a("li",[s._v("ORDER BY 语句使用索引最左前列")])])]),s._v(" "),a("li",[a("ol",{attrs:{start:"2"}},[a("li",[s._v("使用Where子句与ORDER BY 子句条件列组合满足索引最左前列")])])])]),s._v(" "),a("h2",{attrs:{id:"filesort有两种算法：双路排序算法和单路排序算法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#filesort有两种算法：双路排序算法和单路排序算法","aria-hidden":"true"}},[s._v("#")]),s._v(" filesort有两种算法：双路排序算法和单路排序算法")]),s._v(" "),a("ul",[a("li",[s._v("双路排序：MySQL4.1之前使用双路排序，字面意思是两次扫描磁盘，最终得到数据。")]),s._v(" "),a("li",[s._v("单路排序：从磁盘读取查询需要的所有列，按照order by列在buffer对它们进行排序，然后扫描排序后的列表进行输出，它的效率更快一些，避免了第二次读取数据。并且把随机IO变成了顺序IO,但是它会使用更多的空间，因为它把每一行都保存在内存中了。")])]),s._v(" "),a("p",[s._v("在sort_buffer中，方法B比方法A要多占用很多空间，因为方法B是把所有字段都取出，所以有可能取出的数据的总大小超出了sort_buffer的容量，导致每次只能取sort_buffer容量大小的数据进行排序（创建tmp文件，多路合并），排完再取sort_buffer容量大小，再排......从而多次IO.")]),s._v(" "),a("p",[s._v("本来想省一次IO操作，反而导致了大量的IO 操作，反而得不偿失。")]),s._v(" "),a("h2",{attrs:{id:"优化策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化策略","aria-hidden":"true"}},[s._v("#")]),s._v(" 优化策略")]),s._v(" "),a("ul",[a("li",[s._v("增大sort_buffer_size参数的设置")]),s._v(" "),a("li",[s._v("增大max_length_for_sort_dataf参数设置")])]),s._v(" "),a("h1",{attrs:{id:"提高order-by的速度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提高order-by的速度","aria-hidden":"true"}},[s._v("#")]),s._v(" 提高Order by的速度")]),s._v(" "),a("ul",[a("li",[s._v("1.Order by 时select  * 是一个大忌，只查询需要的字段，这点非常重要。在这里的影响是：\n"),a("ul",[a("li",[s._v("1.1 当查询的字段大小总和小于max_length_for_sort_data而且排序字段不是TEXT|BLOB类型时，会用改进后的算法--单路排序，否则用老算法--多路排序。")]),s._v(" "),a("li",[s._v("1.2 两种算法的数据都有可能超出sort_buffer的容量，超出之后，会创建 tmp文件进行合并排序，导致多次IO。此时单路排序算法的性能还不如双路，所以要提高sort_buffer_size.")])])]),s._v(" "),a("li",[a("ol",{attrs:{start:"2"}},[a("li",[s._v("尝试提高sort_buffer_size  , 不管用哪种算法，会增加用改进算法的概率。但是如果设的太高，数据总容量超出sort_buffer_size的概率就增大，明显症状是高的磁盘IO活动和低的处理器使用率。")])])])]),s._v(" "),a("h2",{attrs:{id:"为排序使用索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为排序使用索引","aria-hidden":"true"}},[s._v("#")]),s._v(" 为排序使用索引")]),s._v(" "),a("h3",{attrs:{id:"mysql两种排序方式：文件排序或扫描有序索引排序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql两种排序方式：文件排序或扫描有序索引排序","aria-hidden":"true"}},[s._v("#")]),s._v(" MySQL两种排序方式：文件排序或扫描有序索引排序")]),s._v(" "),a("h3",{attrs:{id:"mysql能为排序玮查询使用相同的索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql能为排序玮查询使用相同的索引","aria-hidden":"true"}},[s._v("#")]),s._v(" MySQL能为排序玮查询使用相同的索引")]),s._v(" "),a("p",[s._v("KEY a_b_c(a,b,c)")]),s._v(" "),a("h3",{attrs:{id:"order-by能使用索引最左前缀"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#order-by能使用索引最左前缀","aria-hidden":"true"}},[s._v("#")]),s._v(" order by能使用索引最左前缀")]),s._v(" "),a("ul",[a("li",[s._v("ORDER BY a")]),s._v(" "),a("li",[s._v("ORDER BY a,b")]),s._v(" "),a("li",[s._v("ORDER BY a,b,c")]),s._v(" "),a("li",[s._v("ORDER BY a DESC, b DESC, c DESC")])]),s._v(" "),a("h3",{attrs:{id:"如果-where使用索引的最左前缀为常量，则order-by能使用索引排序-不产生filessort"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如果-where使用索引的最左前缀为常量，则order-by能使用索引排序-不产生filessort","aria-hidden":"true"}},[s._v("#")]),s._v(" 如果 WHERE使用索引的最左前缀为常量，则order by能使用索引排序,不产生filessort")]),s._v(" "),a("ul",[a("li",[s._v("WHERE a=const ORDER BY b, c")]),s._v(" "),a("li",[s._v("WHERE a=const AND b=const ORDER BY c")]),s._v(" "),a("li",[s._v("WHER  a=const ORDER BY b,c")]),s._v(" "),a("li",[s._v("WHERE a=const AND b>const ORDER BY b,c")])]),s._v(" "),a("h3",{attrs:{id:"不能使用索引进行排序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不能使用索引进行排序","aria-hidden":"true"}},[s._v("#")]),s._v(" 不能使用索引进行排序")]),s._v(" "),a("ul",[a("li",[s._v("ORDER BY a ASC, b DESC, c DESC  排序不一致")]),s._v(" "),a("li",[s._v("WHERE g=const ORDER BY b,c      丢失a索引")]),s._v(" "),a("li",[s._v("WHERE a=const ORDER BY c        丢失b索引")]),s._v(" "),a("li",[s._v("WHERE a=const ORDER BY a,d      d不是索引的一部分")]),s._v(" "),a("li",[s._v("WHERE a in(...) ORDER BY b,c    对于排序来说，多个相等条件也是范围查询")])]),s._v(" "),a("h2",{attrs:{id:"group-by-关键字优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#group-by-关键字优化","aria-hidden":"true"}},[s._v("#")]),s._v(" GROUP BY 关键字优化")]),s._v(" "),a("ul",[a("li",[s._v("group by 实质是先排序后再分组，尊照索引建的最佳左前缀")]),s._v(" "),a("li",[s._v("无法使用索引列， 增大max_length_for_sort_data参数的设置+增大sort_buffer_size参数的设置")]),s._v(" "),a("li",[s._v("where 高于having，能写在where限定的条件就不要去having限定了。")])])])}],!1,null,null,null);r.options.__file="19.order by关键字优化.md";t.default=r.exports}}]);