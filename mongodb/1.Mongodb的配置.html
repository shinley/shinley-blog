<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.Mongodb的配置 | 陈新磊的读书笔记</title>
    <meta name="description" content="Just playing around">
    
    
    <link rel="preload" href="/assets/css/styles.f518d815.css" as="style"><link rel="preload" href="/assets/js/app.f518d815.js" as="script"><link rel="preload" href="/assets/js/6.fc925cca.js" as="script"><link rel="prefetch" href="/assets/js/16.a05f5c53.js"><link rel="prefetch" href="/assets/css/1.styles.5a8ea794.css"><link rel="prefetch" href="/assets/js/1.5a8ea794.js"><link rel="prefetch" href="/assets/css/2.styles.cf289c67.css"><link rel="prefetch" href="/assets/js/2.cf289c67.js"><link rel="prefetch" href="/assets/js/3.ebd152b3.js"><link rel="prefetch" href="/assets/js/4.17531713.js"><link rel="prefetch" href="/assets/js/5.af9e6587.js"><link rel="prefetch" href="/assets/js/7.603902a0.js"><link rel="prefetch" href="/assets/js/8.d2d6cb3f.js"><link rel="prefetch" href="/assets/js/9.1b044dfa.js"><link rel="prefetch" href="/assets/js/10.931c5de7.js"><link rel="prefetch" href="/assets/js/11.c02b6a22.js"><link rel="prefetch" href="/assets/js/12.905af051.js"><link rel="prefetch" href="/assets/js/13.43b353fc.js"><link rel="prefetch" href="/assets/js/14.6b313113.js"><link rel="prefetch" href="/assets/js/15.f92f208f.js"><link rel="prefetch" href="/assets/js/17.f7e63732.js"><link rel="prefetch" href="/assets/js/18.cfdb5582.js"><link rel="prefetch" href="/assets/js/19.f9c23d6f.js"><link rel="prefetch" href="/assets/js/20.ca5cacc5.js"><link rel="prefetch" href="/assets/js/21.b9a3f6bf.js"><link rel="prefetch" href="/assets/js/22.ad52503d.js"><link rel="prefetch" href="/assets/js/23.b50655b8.js"><link rel="prefetch" href="/assets/js/24.ae33eca4.js"><link rel="prefetch" href="/assets/js/25.35319afc.js"><link rel="prefetch" href="/assets/js/26.14cfb51c.js"><link rel="prefetch" href="/assets/js/27.6d00f7aa.js"><link rel="prefetch" href="/assets/js/28.9adb62e6.js"><link rel="prefetch" href="/assets/js/29.96b612e5.js"><link rel="prefetch" href="/assets/js/30.d16089d8.js"><link rel="prefetch" href="/assets/js/31.833984b0.js"><link rel="prefetch" href="/assets/js/32.0f873b57.js"><link rel="prefetch" href="/assets/js/33.e1a966ad.js"><link rel="prefetch" href="/assets/js/34.1e435d13.js"><link rel="prefetch" href="/assets/js/35.400e2100.js">
    <link rel="stylesheet" href="/assets/css/1.styles.5a8ea794.css"><link rel="stylesheet" href="/assets/css/2.styles.cf289c67.css"><link rel="stylesheet" href="/assets/css/styles.f518d815.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">陈新磊的读书笔记</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/python/fabric.html" class="nav-link">主页</a></div><div class="nav-item"><a href="/mongodb/" class="nav-link router-link-active">MongoDB</a></div><div class="nav-item"><a href="/redis/" class="nav-link">Redis</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/python/fabric.html" class="nav-link">主页</a></div><div class="nav-item"><a href="/mongodb/" class="nav-link router-link-active">MongoDB</a></div><div class="nav-item"><a href="/redis/" class="nav-link">Redis</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Python</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/python/fabric.html" class="sidebar-link">自动化部署工具Fabric</a></li><li><a href="/python/subprocess.html" class="sidebar-link">Subprocess调用shell命令</a></li><li><a href="/python/pexpect.html" class="sidebar-link">自动化交互式的命令行pexpect</a></li><li><a href="/python/crashzip.html" class="sidebar-link">暴力破解zip压缩包的密码</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>JAVA</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/java/jvm.html" class="sidebar-link">JVM性能调优</a></li><li><a href="/java/thread.html" class="sidebar-link">多线程</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>MySQL</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/mysql/1.Install-MySQL5.7.22.html" class="sidebar-link">1. MySQL 5.7.22安装</a></li><li><a href="/mysql/2.MySQL-User-Manager.html" class="sidebar-link">2. MySQL 用户管理</a></li><li><a href="/mysql/3.MySQL备份与还原.html" class="sidebar-link">3.MySql备份与还原</a></li><li><a href="/mysql/4.七种连接方式.html" class="sidebar-link">4.七种连接方式</a></li><li><a href="/mysql/5.MySQL索引01.html" class="sidebar-link">5.MySQL索引（一）</a></li><li><a href="/mysql/6.MySQL索引02.html" class="sidebar-link">6.MySQL索引(二)</a></li><li><a href="/mysql/7.单表优化案例.html" class="sidebar-link">7.单表优化案例</a></li><li><a href="/mysql/8.两表和三表优化案例.html" class="sidebar-link">8. 两表和三表优化案例</a></li><li><a href="/mysql/9.索引优化01.html" class="sidebar-link">9.索引优化(一)</a></li><li><a href="/mysql/10.索引优化02.html" class="sidebar-link">10.索引优化(二)</a></li><li><a href="/mysql/11.索引优化03.html" class="sidebar-link">11. 索引优化(三)</a></li><li><a href="/mysql/12.索引优化04.html" class="sidebar-link">12. 索引优化(四)</a></li><li><a href="/mysql/13.索引优化05.html" class="sidebar-link">13.索引优化(五)</a></li><li><a href="/mysql/14.索引优化06.html" class="sidebar-link">14. 索引优化(六)</a></li><li><a href="/mysql/15.索引优化07.html" class="sidebar-link">15.索引优化(七)</a></li><li><a href="/mysql/16.索引优化08.html" class="sidebar-link">16.索引优化(八)</a></li><li><a href="/mysql/17.索引面试题.html" class="sidebar-link">17.索引面试题</a></li><li><a href="/mysql/18.小表驱动大表.html" class="sidebar-link">18.小表驱动大表</a></li><li><a href="/mysql/19.order by关键字优化.html" class="sidebar-link">19.order by关键字优化</a></li><li><a href="/mysql/20.慢查询日志分析.html" class="sidebar-link">20.慢查询日志分析</a></li><li><a href="/mysql/21.批量数据脚本.html" class="sidebar-link">21.批量数据脚本</a></li><li><a href="/mysql/22.Show Profile.html" class="sidebar-link">22.Show Profile</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="_1-mongodb的配置"><a href="#_1-mongodb的配置" aria-hidden="true" class="header-anchor">#</a> 1.Mongodb的配置</h1> <p>windows下需要配置path环境变量到 bin 目录</p> <p>mongodb的数据库文件夹，新建一个db目录，用来保存所有数据文件。</p> <p>用mongod.exe命令启动，启动时可以设置端口号，也可以不设置端口号</p> <h5 id="不设端口："><a href="#不设端口：" aria-hidden="true" class="header-anchor">#</a> 不设端口：</h5> <div class="language- extra-class"><pre class="language-text"><code>mongod --dbpath E:\MongoDB\db
</code></pre></div><h5 id="设置端口："><a href="#设置端口：" aria-hidden="true" class="header-anchor">#</a> 设置端口：</h5> <div class="language- extra-class"><pre class="language-text"><code>mongod --dbpath E:\MongoDB\db --port=27020
</code></pre></div><h5 id="连接mongodb"><a href="#连接mongodb" aria-hidden="true" class="header-anchor">#</a> 连接mongodb:</h5> <p>在cmd命令行直接执行命令：mongo</p> <p>会直接连到一个测试库。</p> <h6 id="查询所有的数据库："><a href="#查询所有的数据库：" aria-hidden="true" class="header-anchor">#</a> 查询所有的数据库：</h6> <div class="language- extra-class"><pre class="language-text"><code>    show databases;
</code></pre></div><h6 id="查询所有的集合："><a href="#查询所有的集合：" aria-hidden="true" class="header-anchor">#</a> 查询所有的集合：</h6> <div class="language- extra-class"><pre class="language-text"><code>    show collections;
</code></pre></div><h6 id="删除集合"><a href="#删除集合" aria-hidden="true" class="header-anchor">#</a> 删除集合</h6> <div class="language- extra-class"><pre class="language-text"><code>db.集合名称.drop();
</code></pre></div><h6 id="在mongodb根目录下建立一个mongodb-conf的配置文件"><a href="#在mongodb根目录下建立一个mongodb-conf的配置文件" aria-hidden="true" class="header-anchor">#</a> 在mongodb根目录下建立一个mongodb.conf的配置文件</h6> <div class="language- extra-class"><pre class="language-text"><code>#设置数据目录路径
dbpath = E:\MongoDB\db
#设置日志信息的文件路径
logpath = E:\MongoDB\logs
#打开日志输出操作
logappend = true
#不使用用户登录
noauth=true
#设置端口
port = 27020
</code></pre></div><p>在mongodb根目录下建立日志文件夹 : logs</p> <p>在logs文件夹下建立一个日志文件：mongodb.log</p> <p>重新启动MongoDB数据库：</p> <div class="language- extra-class"><pre class="language-text"><code>mongod -f E:\MongoDB\mongodb.conf
</code></pre></div><h6 id="再次连接mongodb数据库，需要加上端口号"><a href="#再次连接mongodb数据库，需要加上端口号" aria-hidden="true" class="header-anchor">#</a> 再次连接mongodb数据库，需要加上端口号</h6> <div class="language- extra-class"><pre class="language-text"><code>./mongo --port=27020
</code></pre></div><h6 id="关闭mongodb"><a href="#关闭mongodb" aria-hidden="true" class="header-anchor">#</a> 关闭mongodb</h6> <div class="language- extra-class"><pre class="language-text"><code>    pkill mongod
</code></pre></div><p>进入mongo shell ：运行</p> <div class="language- extra-class"><pre class="language-text"><code>db.shutdownServer()
</code></pre></div><p>官方文档说可以使用killall mongo或kill  -15 PID来关闭。
或者在Mongo Javascript Shell中</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;use admin
&gt;db.shutdownServer( )
mongo默认处于test,如果直接运行会出现
&gt; db.shutdownServer()
shutdown command only works with the admin database; try 'use admin'

</code></pre></div><p>MongoDB数据库一关系型数据库的概念对应关系</p> <table><thead><tr><th>关系型数据库</th> <th>NoSql数据库</th></tr></thead> <tbody><tr><td>数据库</td> <td>数据库</td></tr> <tr><td>表</td> <td>集合</td></tr> <tr><td>行</td> <td>成员</td></tr> <tr><td>主键</td> <td>ObjectID (自动维护)</td></tr></tbody></table> <p>在整个行业中MongoDB是发展最好的一个NoSQL数据库。</p> <h3 id="【远程连接数据库】"><a href="#【远程连接数据库】" aria-hidden="true" class="header-anchor">#</a> 【远程连接数据库】</h3> <div class="language- extra-class"><pre class="language-text"><code>$ mongo  192.168.55.127:27020/myDB
</code></pre></div><p>或者启动 mongo shell时不连接任何mongod实例，通过 --nodb参数启动</p> <div class="language- extra-class"><pre class="language-text"><code>$mongo --nodb

$conn = new Mongo(&quot;192.168.55.127:27020&quot;);
$db = conn.getDB(&quot;myDB&quot;);
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/6.fc925cca.js" defer></script><script src="/assets/js/app.f518d815.js" defer></script>
  </body>
</html>
